{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.min.js"></script>
    <title>Profile</title>
</head>
<body>
    <h1> Профиль </h1>
    <ul>
        <div class="edit__content">
            <div class="container">
              <div class="row">
                <form action="" class="form__edit" id="average">
                  <div class="field__container">
                    
                  <h4>Avatar: </h4>
                  
                  <ul id="avatar"></ul>
                  <div id="image-container"></div>

                  <h4>User: </h4>
                  <ul id="username"></ul>             
                 
                  <h4>First_name: </h4>
                  <ul id="first_name"></ul>  

                  <h4>Last_name: </h4>
                  <ul id="last_name"></ul>  
                  
                  <h4>Email: </h4>
                  <ul id="email"></ul> 
                  
                  <h4>Email_two: </h4>
                  <ul id="email_two"></ul>

                  <h4>Phone: </h4>
                  <ul id="phone"></ul>
                  
                  
                  
                  </div>
     
                </form>
                <p>
                <div class="">
                  <a href="{% url 'prof-user_edit' %}"><button class="">Edit</button></a>
                </div>
                </p>
              
                <hr>
                <div class="edit__buttons">
                  <a href="{% url 'room-list' %}"><button class="button__back">Back</button></a>
                </div>
              </div>
            </div>
          </div>
    </ul>
      
      <script>
    

        
        const url = 'http://localhost:8001/profile/{{user.id}}/';

        fetch(url)
        .then(response => {
          return response.json();
        })
        .then(data => {
              console.log(data);
              
              let elementUsername = document.querySelector("#username")
                if (elementUsername) {
                  elementUsername.textContent = data.user.username;
                }
              let elementFirstname = document.querySelector("#first_name")
                if (elementFirstname) {
                  elementFirstname.textContent = data.first_name;
                }
              let elementLastname = document.querySelector("#last_name")
                if (elementLastname) {
                  elementLastname.textContent = data.last_name;
                }
              let elementEmail = document.querySelector("#email")
                if (elementEmail) {
                  elementEmail.textContent = data.user.email;
                }
              let elementEmailtwo = document.querySelector("#email_two")
                if (elementEmailtwo) {
                  elementEmailtwo.textContent = data.email_two;
                }
              let elementPhone = document.querySelector("#phone")
                if (elementPhone) {
                  elementPhone.textContent = data.phone;
                }
              let elementAvatar = document.getElementById("image-container")
                if (elementAvatar) {
                  const imageElement = document.createElement("img");
                  imageElement.src = data.avatar;
                  imageElement.height ="300";
                  imageElement.width = "300";
                  imageElement.className = "rounded mx-auto d-block";
                  elementAvatar.appendChild(imageElement);
                  console.log(elementAvatar);
                  
                 }
             
            })
       
        

            
      </script>
      
      
</body>
</html>